axis.title.y = element_text(color = "grey20", size = 15, angle = 90, hjust = .5, vjust = 2, face = "plain")) +
#ylim(0, 5) +
xlab("Cases relative to Population Share") +
ylab("Frequency")
ggplot(agesplit[[1]], aes(x=case_share/age_share)) +
geom_histogram(binwidth=0.15, color="black", fill="white") +
geom_vline(aes(xintercept=1), color="red", linetype="dashed", size=1) +
geom_vline(aes(xintercept=mean(case_share/age_share)), color="blue", linetype="dashed", size=1) +
theme(text = element_text(size=15),
axis.text.x = element_text(angle = 0, hjust=0.5),
axis.text.y = element_text(angle = 0, hjust=0.5),
axis.title.x = element_text(color = "grey20", size = 15, vjust = 0.5, face = "plain"),
axis.title.y = element_text(color = "grey20", size = 15, angle = 90, hjust = .5, vjust = 2, face = "plain")) +
ylim(0, 60) +
xlab("Cases relative to Population Share") +
ylab("Frequency")
ggplot(agesplit[[2]], aes(x=case_share/age_share)) +
geom_histogram(binwidth=0.15, color="black", fill="white") +
geom_vline(aes(xintercept=1), color="red", linetype="dashed", size=1) +
geom_vline(aes(xintercept=mean(case_share/age_share)), color="blue", linetype="dashed", size=1) +
theme(text = element_text(size=15),
axis.text.x = element_text(angle = 0, hjust=0.5),
axis.text.y = element_text(angle = 0, hjust=0.5),
axis.title.x = element_text(color = "grey20", size = 15, vjust = 0.5, face = "plain"),
axis.title.y = element_text(color = "grey20", size = 15, angle = 90, hjust = .5, vjust = 2, face = "plain")) +
ylim(0, 60) +
xlab("Cases relative to Population Share") +
ylab("Frequency")
ggplot(agesplit[[2]], aes(x=case_share/age_share)) +
geom_histogram(binwidth=0.15, color="black", fill="white") +
geom_vline(aes(xintercept=1), color="red", linetype="dashed", size=1) +
geom_vline(aes(xintercept=mean(case_share/age_share)), color="blue", linetype="dashed", size=1) +
theme(text = element_text(size=15),
axis.text.x = element_text(angle = 0, hjust=0.5),
axis.text.y = element_text(angle = 0, hjust=0.5),
axis.title.x = element_text(color = "grey20", size = 15, vjust = 0.5, face = "plain"),
axis.title.y = element_text(color = "grey20", size = 15, angle = 90, hjust = .5, vjust = 2, face = "plain")) +
ylim(0, 80) +
xlab("Cases relative to Population Share") +
ylab("Frequency")
ggplot(agesplit[[1]], aes(x=case_share/age_share)) +
geom_histogram(binwidth=0.15, color="black", fill="white") +
geom_vline(aes(xintercept=1), color="red", linetype="dashed", size=1) +
geom_vline(aes(xintercept=mean(case_share/age_share)), color="blue", linetype="dashed", size=1) +
theme(text = element_text(size=15),
axis.text.x = element_text(angle = 0, hjust=0.5),
axis.text.y = element_text(angle = 0, hjust=0.5),
axis.title.x = element_text(color = "grey20", size = 15, vjust = 0.5, face = "plain"),
axis.title.y = element_text(color = "grey20", size = 15, angle = 90, hjust = .5, vjust = 2, face = "plain")) +
ylim(0, 80) +
xlab("Cases relative to Population Share") +
ylab("Frequency")
ggplot(agesplit[[2]], aes(x=case_share/age_share)) +
geom_histogram(binwidth=0.15, color="black", fill="white") +
geom_vline(aes(xintercept=1), color="red", linetype="dashed", size=1) +
geom_vline(aes(xintercept=mean(case_share/age_share)), color="blue", linetype="dashed", size=1) +
theme(text = element_text(size=15),
axis.text.x = element_text(angle = 0, hjust=0.5),
axis.text.y = element_text(angle = 0, hjust=0.5),
axis.title.x = element_text(color = "grey20", size = 15, vjust = 0.5, face = "plain"),
axis.title.y = element_text(color = "grey20", size = 15, angle = 90, hjust = .5, vjust = 2, face = "plain")) +
ylim(0, 80) +
xlab("Cases relative to Population Share") +
ylab("Frequency")
ggplot(agesplit[[1]], aes(x=case_share/age_share)) +
geom_histogram(binwidth=0.15, color="black", fill="white") +
geom_vline(aes(xintercept=1), color="red", linetype="dashed", size=1) +
geom_vline(aes(xintercept=mean(case_share/age_share)), color="blue", linetype="dashed", size=1) +
theme(text = element_text(size=15),
axis.text.x = element_text(angle = 0, hjust=0.5),
axis.text.y = element_text(angle = 0, hjust=0.5),
axis.title.x = element_text(color = "grey20", size = 15, vjust = 0.5, face = "plain"),
axis.title.y = element_text(color = "grey20", size = 15, angle = 90, hjust = .5, vjust = 2, face = "plain")) +
ylim(0, 80) +
xlab("Cases relative to Population Share") +
ylab("Frequency")
ggplot(agesplit[[3]], aes(x=case_share/age_share)) +
geom_histogram(binwidth=0.15, color="black", fill="white") +
geom_vline(aes(xintercept=1), color="red", linetype="dashed", size=1) +
geom_vline(aes(xintercept=mean(case_share/age_share)), color="blue", linetype="dashed", size=1) +
theme(text = element_text(size=15),
axis.text.x = element_text(angle = 0, hjust=0.5),
axis.text.y = element_text(angle = 0, hjust=0.5),
axis.title.x = element_text(color = "grey20", size = 15, vjust = 0.5, face = "plain"),
axis.title.y = element_text(color = "grey20", size = 15, angle = 90, hjust = .5, vjust = 2, face = "plain")) +
ylim(0, 80) +
xlab("Cases relative to Population Share") +
ylab("Frequency")
agesplit[[3]]['age_share'] <- rowSums(agesplit[[3]][,21:23])/agesplit[[3]][,24]
ggplot(agesplit[[3]], aes(x=case_share/age_share)) +
geom_histogram(binwidth=0.15, color="black", fill="white") +
geom_vline(aes(xintercept=1), color="red", linetype="dashed", size=1) +
geom_vline(aes(xintercept=mean(case_share/age_share)), color="blue", linetype="dashed", size=1) +
theme(text = element_text(size=15),
axis.text.x = element_text(angle = 0, hjust=0.5),
axis.text.y = element_text(angle = 0, hjust=0.5),
axis.title.x = element_text(color = "grey20", size = 15, vjust = 0.5, face = "plain"),
axis.title.y = element_text(color = "grey20", size = 15, angle = 90, hjust = .5, vjust = 2, face = "plain")) +
ylim(0, 80) +
xlab("Cases relative to Population Share") +
ylab("Frequency")
covid_byage[["Altersgruppe"]] %>%
unique()
View(agesplit[[4]])
View(agesplit[[5]])
View(agesplit[[8]])
View(agesplit[[7]])
case_per_krs
agesplit[[3]]['case_share'] <- agesplit[[3]]$cases + agesplit[[7]]$cases/case_per_krs
agesplit[[3]]$cases + agesplit[[7]]$cases/case_per_krs
agesplit[[3]]['case_share'] <- (agesplit[[3]]$cases + agesplit[[7]]$cases)/case_per_krs[[2]]
(agesplit[[3]]$cases + agesplit[[7]]$cases)/case_per_krs[[2]]
agesplit[[3]]['case_share']
ggplot(agesplit[[1]], aes(x=case_share/age_share)) +
geom_histogram(binwidth=0.15, color="black", fill="white") +
geom_vline(aes(xintercept=1), color="red", linetype="dashed", size=1) +
geom_vline(aes(xintercept=mean(case_share/age_share)), color="blue", linetype="dashed", size=1) +
theme(text = element_text(size=15),
axis.text.x = element_text(angle = 0, hjust=0.5),
axis.text.y = element_text(angle = 0, hjust=0.5),
axis.title.x = element_text(color = "grey20", size = 15, vjust = 0.5, face = "plain"),
axis.title.y = element_text(color = "grey20", size = 15, angle = 90, hjust = .5, vjust = 2, face = "plain")) +
ylim(0, 80) +
xlab("Cases relative to Population Share") +
ylab("Frequency")
ggplot(agesplit[[2]], aes(x=case_share/age_share)) +
geom_histogram(binwidth=0.15, color="black", fill="white") +
geom_vline(aes(xintercept=1), color="red", linetype="dashed", size=1) +
geom_vline(aes(xintercept=mean(case_share/age_share)), color="blue", linetype="dashed", size=1) +
theme(text = element_text(size=15),
axis.text.x = element_text(angle = 0, hjust=0.5),
axis.text.y = element_text(angle = 0, hjust=0.5),
axis.title.x = element_text(color = "grey20", size = 15, vjust = 0.5, face = "plain"),
axis.title.y = element_text(color = "grey20", size = 15, angle = 90, hjust = .5, vjust = 2, face = "plain")) +
ylim(0, 80) +
xlab("Cases relative to Population Share") +
ylab("Frequency")
ggplot(agesplit[[3]], aes(x=case_share/age_share)) +
geom_histogram(binwidth=0.15, color="black", fill="white") +
geom_vline(aes(xintercept=1), color="red", linetype="dashed", size=1) +
geom_vline(aes(xintercept=mean(case_share/age_share)), color="blue", linetype="dashed", size=1) +
theme(text = element_text(size=15),
axis.text.x = element_text(angle = 0, hjust=0.5),
axis.text.y = element_text(angle = 0, hjust=0.5),
axis.title.x = element_text(color = "grey20", size = 15, vjust = 0.5, face = "plain"),
axis.title.y = element_text(color = "grey20", size = 15, angle = 90, hjust = .5, vjust = 2, face = "plain")) +
ylim(0, 80) +
xlab("Cases relative to Population Share") +
ylab("Frequency")
ggplot(agesplit[[1]], aes(x=case_share/age_share)) +
geom_histogram(binwidth=0.15, color="black", fill="white") +
geom_vline(aes(xintercept=1), color="red", linetype="dashed", size=1) +
geom_vline(aes(xintercept=mean(case_share/age_share)), color="blue", linetype="dashed", size=1) +
theme(text = element_text(size=15),
axis.text.x = element_text(angle = 0, hjust=0.5),
axis.text.y = element_text(angle = 0, hjust=0.5),
axis.title.x = element_text(color = "grey20", size = 15, vjust = 0.5, face = "plain"),
axis.title.y = element_text(color = "grey20", size = 15, angle = 90, hjust = .5, vjust = 2, face = "plain")) +
ylim(0, 80) +
xlab("Cases relative to Population Share") +
ylab("Frequency")
?ggplot
?ylim
View(agesplit[[1]])
ggplot(agesplit[[1]], aes(x=case_share/age_share)) +
geom_histogram(binwidth=0.15, color="black", fill="white") +
geom_vline(aes(xintercept=1), color="red", linetype="dashed", size=1) +
geom_vline(aes(xintercept=mean(case_share/age_share)), color="blue", linetype="dashed", size=1) +
theme(text = element_text(size=15),
axis.text.x = element_text(angle = 0, hjust=0.5),
axis.text.y = element_text(angle = 0, hjust=0.5),
axis.title.x = element_text(color = "grey20", size = 15, vjust = 0.5, face = "plain"),
axis.title.y = element_text(color = "grey20", size = 15, angle = 90, hjust = .5, vjust = 2, face = "plain")) +
labs(title = "AgeGroup 15 - 34") +
ylim(0, 80) +
xlab("Cases relative to Population Share") +
ylab("Frequency") +
ggplot(agesplit[[2]], aes(x=case_share/age_share)) +
geom_histogram(binwidth=0.15, color="black", fill="white") +
geom_vline(aes(xintercept=1), color="red", linetype="dashed", size=1) +
geom_vline(aes(xintercept=mean(case_share/age_share)), color="blue", linetype="dashed", size=1) +
theme(text = element_text(size=15),
axis.text.x = element_text(angle = 0, hjust=0.5),
axis.text.y = element_text(angle = 0, hjust=0.5),
axis.title.x = element_text(color = "grey20", size = 15, vjust = 0.5, face = "plain"),
axis.title.y = element_text(color = "grey20", size = 15, angle = 90, hjust = .5, vjust = 2, face = "plain")) +
ylim(0, 80) +
xlab("Cases relative to Population Share") +
ylab("Frequency")
ggplot(agesplit[[1]], aes(x=case_share/age_share)) +
geom_histogram(binwidth=0.15, color="black", fill="white") +
geom_vline(aes(xintercept=1), color="red", linetype="dashed", size=1) +
geom_vline(aes(xintercept=mean(case_share/age_share)), color="blue", linetype="dashed", size=1) +
theme(text = element_text(size=15),
axis.text.x = element_text(angle = 0, hjust=0.5),
axis.text.y = element_text(angle = 0, hjust=0.5),
axis.title.x = element_text(color = "grey20", size = 15, vjust = 0.5, face = "plain"),
axis.title.y = element_text(color = "grey20", size = 15, angle = 90, hjust = .5, vjust = 2, face = "plain")) +
#labs(title = "AgeGroup 15 - 34") +
ylim(0, 80) +
xlab("Cases relative to Population Share") +
ylab("Frequency") +
ggplot(agesplit[[2]], aes(x=case_share/age_share)) +
geom_histogram(binwidth=0.15, color="black", fill="white") +
geom_vline(aes(xintercept=1), color="red", linetype="dashed", size=1) +
geom_vline(aes(xintercept=mean(case_share/age_share)), color="blue", linetype="dashed", size=1) +
theme(text = element_text(size=15),
axis.text.x = element_text(angle = 0, hjust=0.5),
axis.text.y = element_text(angle = 0, hjust=0.5),
axis.title.x = element_text(color = "grey20", size = 15, vjust = 0.5, face = "plain"),
axis.title.y = element_text(color = "grey20", size = 15, angle = 90, hjust = .5, vjust = 2, face = "plain")) +
ylim(0, 80) +
xlab("Cases relative to Population Share") +
ylab("Frequency")
ggplot(agesplit[[1]], aes(x=case_share/age_share)) +
geom_histogram(binwidth=0.15, color="black", fill="white") +
geom_vline(aes(xintercept=1), color="red", linetype="dashed", size=1) +
geom_vline(aes(xintercept=mean(case_share/age_share)), color="blue", linetype="dashed", size=1) +
theme(text = element_text(size=15),
axis.text.x = element_text(angle = 0, hjust=0.5),
axis.text.y = element_text(angle = 0, hjust=0.5),
axis.title.x = element_text(color = "grey20", size = 15, vjust = 0.5, face = "plain"),
axis.title.y = element_text(color = "grey20", size = 15, angle = 90, hjust = .5, vjust = 2, face = "plain")) +
labs(title = "AgeGroup 15 - 34") +
ylim(0, 80) +
xlab("Cases relative to Population Share") +
ylab("Frequency")
View(agesplit[[2]])
ggplot(agesplit[[2]], aes(x=case_share/age_share)) +
geom_histogram(binwidth=0.15, color="black", fill="white") +
geom_vline(aes(xintercept=1), color="red", linetype="dashed", size=1) +
geom_vline(aes(xintercept=mean(case_share/age_share)), color="blue", linetype="dashed", size=1) +
theme(text = element_text(size=15),
axis.text.x = element_text(angle = 0, hjust=0.5),
axis.text.y = element_text(angle = 0, hjust=0.5),
axis.title.x = element_text(color = "grey20", size = 15, vjust = 0.5, face = "plain"),
axis.title.y = element_text(color = "grey20", size = 15, angle = 90, hjust = .5, vjust = 2, face = "plain")) +
labs(title = "Age Group 35 - 59") +
ylim(0, 80) +
xlab("Cases relative to Population Share") +
ylab("Frequency")
ggplot(agesplit[[2]], aes(x=case_share/age_share)) +
geom_histogram(binwidth=0.15, color="black", fill="white") +
geom_vline(aes(xintercept=1), color="red", linetype="dashed", size=1) +
geom_vline(aes(xintercept=mean(case_share/age_share)), color="blue", linetype="dashed", size=1) +
theme(text = element_text(size=15),
axis.text.x = element_text(angle = 0, hjust=0.5),
axis.text.y = element_text(angle = 0, hjust=0.5),
axis.title.x = element_text(color = "grey20", size = 15, vjust = 0.5, face = "plain"),
axis.title.y = element_text(color = "grey20", size = 15, angle = 90, hjust = .5, vjust = 2, face = "plain")) +
labs(title = "Age Group 35 - 59") +
ylim(0, 80) +
xlab("Cases relative to Population Share") +
ylab("Frequency")
ggsave('age_share_35_59')
ggplot(agesplit[[2]], aes(x=case_share/age_share)) +
geom_histogram(binwidth=0.15, color="black", fill="white") +
geom_vline(aes(xintercept=1), color="red", linetype="dashed", size=1) +
geom_vline(aes(xintercept=mean(case_share/age_share)), color="blue", linetype="dashed", size=1) +
theme(text = element_text(size=15),
axis.text.x = element_text(angle = 0, hjust=0.5),
axis.text.y = element_text(angle = 0, hjust=0.5),
axis.title.x = element_text(color = "grey20", size = 15, vjust = 0.5, face = "plain"),
axis.title.y = element_text(color = "grey20", size = 15, angle = 90, hjust = .5, vjust = 2, face = "plain")) +
labs(title = "Age Group 35 - 59") +
ylim(0, 80) +
xlab("Cases relative to Population Share") +
ylab("Frequency")
ggplot(agesplit[[1]], aes(x=case_share/age_share)) +
geom_histogram(binwidth=0.15, color="black", fill="white") +
geom_vline(aes(xintercept=1), color="red", linetype="dashed", size=1) +
geom_vline(aes(xintercept=mean(case_share/age_share)), color="blue", linetype="dashed", size=1) +
theme(text = element_text(size=15),
axis.text.x = element_text(angle = 0, hjust=0.5),
axis.text.y = element_text(angle = 0, hjust=0.5),
axis.title.x = element_text(color = "grey20", size = 15, vjust = 0.5, face = "plain"),
axis.title.y = element_text(color = "grey20", size = 15, angle = 90, hjust = .5, vjust = 2, face = "plain")) +
labs(title = "Age Group 15 - 34") +
ylim(0, 80) +
xlab("Cases relative to Population Share") +
ylab("Frequency")
ggsave('age_share_15_34.pdf')
ggplot(agesplit[[2]], aes(x=case_share/age_share)) +
geom_histogram(binwidth=0.15, color="black", fill="white") +
geom_vline(aes(xintercept=1), color="red", linetype="dashed", size=1) +
geom_vline(aes(xintercept=mean(case_share/age_share)), color="blue", linetype="dashed", size=1) +
theme(text = element_text(size=15),
axis.text.x = element_text(angle = 0, hjust=0.5),
axis.text.y = element_text(angle = 0, hjust=0.5),
axis.title.x = element_text(color = "grey20", size = 15, vjust = 0.5, face = "plain"),
axis.title.y = element_text(color = "grey20", size = 15, angle = 90, hjust = .5, vjust = 2, face = "plain")) +
labs(title = "Age Group 35 - 59") +
ylim(0, 80) +
xlab("Cases relative to Population Share") +
ylab("Frequency")
ggsave('age_share_35_59')
ggplot(agesplit[[2]], aes(x=case_share/age_share)) +
geom_histogram(binwidth=0.15, color="black", fill="white") +
geom_vline(aes(xintercept=1), color="red", linetype="dashed", size=1) +
geom_vline(aes(xintercept=mean(case_share/age_share)), color="blue", linetype="dashed", size=1) +
theme(text = element_text(size=15),
axis.text.x = element_text(angle = 0, hjust=0.5),
axis.text.y = element_text(angle = 0, hjust=0.5),
axis.title.x = element_text(color = "grey20", size = 15, vjust = 0.5, face = "plain"),
axis.title.y = element_text(color = "grey20", size = 15, angle = 90, hjust = .5, vjust = 2, face = "plain")) +
labs(title = "Age Group 35 - 59") +
ylim(0, 80) +
xlab("Cases relative to Population Share") +
ylab("Frequency")
ggsave('age_share_35_59.pdf')
agesplit[[3]][c(1, 5, 21:23, 47)]
vcat(agesplit[[3]][c(1,47)],agesplit[[7]][c(1,47)])
bind_rows(agesplit[[3]][c(1,47)],agesplit[[7]][c(1,47)])
temp <- bind_rows(agesplit[[3]][c(1,47)],agesplit[[7]][c(1,47)])
aggregate(temp[[2]], by = list(temp[[1]]), FUN = sum)
temp <- aggregate(temp[[2]], by = list(temp[[1]]), FUN = sum)
colnames(temp)
?merge
merge(agesplit[[3]]['krs'], temp, by.x = "krs", by.y = "Group.1", all.x = T)
agesplit[[3]]$krs
merge(agesplit[[3]]['krs'], temp, by.x = "krs", by.y = "Group.1", all.x = T)
agesplit[[3]]$krs
merge(agesplit[[3]]['krs'], temp, by.x = "krs", by.y = "Group.1", all.x = T)
agesplit[[3]]['cases'] <- merge(agesplit[[3]]['krs'], temp, by.x = "krs", by.y = "Group.1", all.x = T)[[2]]
agesplit[[3]]['case_share'] <- agesplit[[3]][["cases"]]/agesplit[[3]]$AnzahlFall
ggplot(agesplit[[3]], aes(x=case_share/age_share)) +
geom_histogram(binwidth=0.15, color="black", fill="white") +
geom_vline(aes(xintercept=1), color="red", linetype="dashed", size=1) +
geom_vline(aes(xintercept=mean(case_share/age_share)), color="blue", linetype="dashed", size=1) +
theme(text = element_text(size=15),
axis.text.x = element_text(angle = 0, hjust=0.5),
axis.text.y = element_text(angle = 0, hjust=0.5),
axis.title.x = element_text(color = "grey20", size = 15, vjust = 0.5, face = "plain"),
axis.title.y = element_text(color = "grey20", size = 15, angle = 90, hjust = .5, vjust = 2, face = "plain")) +
ylim(0, 80) +
xlab("Cases relative to Population Share") +
ylab("Frequency")
agesplit[[3]][["cases"]]
agesplit[[3]][["cases"]]/agesplit[[3]][["AnzahlFall"]]
agesplit[[3]]['case_share'] <- agesplit[[3]][["AnzahlFall"]]/agesplit[[3]][["cases"]]
agesplit[[3]]['case_share']
ggplot(agesplit[[3]], aes(x=case_share/age_share)) +
geom_histogram(binwidth=0.15, color="black", fill="white") +
geom_vline(aes(xintercept=1), color="red", linetype="dashed", size=1) +
geom_vline(aes(xintercept=mean(case_share/age_share)), color="blue", linetype="dashed", size=1) +
theme(text = element_text(size=15),
axis.text.x = element_text(angle = 0, hjust=0.5),
axis.text.y = element_text(angle = 0, hjust=0.5),
axis.title.x = element_text(color = "grey20", size = 15, vjust = 0.5, face = "plain"),
axis.title.y = element_text(color = "grey20", size = 15, angle = 90, hjust = .5, vjust = 2, face = "plain")) +
ylim(0, 80) +
xlab("Cases relative to Population Share") +
ylab("Frequency")
dim(agesplit[[3]])
ggplot(agesplit[[3]], aes(x=case_share/age_share)) +
geom_histogram(binwidth=0.15, color="black", fill="white") +
geom_vline(aes(xintercept=1), color="red", linetype="dashed", size=1) +
geom_vline(aes(xintercept=mean(case_share/age_share)), color="blue", linetype="dashed", size=1) +
theme(text = element_text(size=15),
axis.text.x = element_text(angle = 0, hjust=0.5),
axis.text.y = element_text(angle = 0, hjust=0.5),
axis.title.x = element_text(color = "grey20", size = 15, vjust = 0.5, face = "plain"),
axis.title.y = element_text(color = "grey20", size = 15, angle = 90, hjust = .5, vjust = 2, face = "plain")) +
ylim(0, 100) +
xlab("Cases relative to Population Share") +
ylab("Frequency")
agesplit[[3]]$age_share
agesplit[[3]]$case_share
ggplot(agesplit[[3]], aes(x=case_share/age_share)) +
geom_histogram(binwidth=0.15, color="black", fill="white") +
geom_vline(aes(xintercept=1), color="red", linetype="dashed", size=1) +
geom_vline(aes(xintercept=mean(case_share/age_share)), color="blue", linetype="dashed", size=1) +
theme(text = element_text(size=15),
axis.text.x = element_text(angle = 0, hjust=0.5),
axis.text.y = element_text(angle = 0, hjust=0.5),
axis.title.x = element_text(color = "grey20", size = 15, vjust = 0.5, face = "plain"),
axis.title.y = element_text(color = "grey20", size = 15, angle = 90, hjust = .5, vjust = 2, face = "plain")) +
#ylim(0, 100) +
xlab("Cases relative to Population Share") +
ylab("Frequency")
ggplot(agesplit[[3]], aes(x=case_share/age_share)) +
geom_histogram(binwidth=0.15, color="black", fill="white") +
geom_vline(aes(xintercept=1), color="red", linetype="dashed", size=1) +
geom_vline(aes(xintercept=mean(case_share/age_share)), color="blue", linetype="dashed", size=1) +
theme(text = element_text(size=15),
axis.text.x = element_text(angle = 0, hjust=0.5),
axis.text.y = element_text(angle = 0, hjust=0.5),
axis.title.x = element_text(color = "grey20", size = 15, vjust = 0.5, face = "plain"),
axis.title.y = element_text(color = "grey20", size = 15, angle = 90, hjust = .5, vjust = 2, face = "plain")) +
ylim(0, 120) +
xlab("Cases relative to Population Share") +
ylab("Frequency")
ggsave('age_share_60+')
agesplit[[3]]['cases']
View(covid_byage)
agesplit[[3]][c('krs', 'AnzahlFall')]
setwd("C:/Users/Marius/Desktop/WirVsVirus/coronaDB")
covid_byage <- read.csv(paste0(getwd(), "/data/03_integrated_data/covid_merged_byage.csv"))
covid_bylk <- read.csv(paste0(getwd(), "/data/03_integrated_data/covid_merged_bylk.csv"))
covid_bysex <- read.csv(paste0(getwd(), "/data/03_integrated_data/covid_merged_bysex.csv"))
View(covid_byage)
case_per_krs <- aggregate(covid_byage$AnzahlFall, by = list(covid_byage$krs), FUN = sum) %>%
set_colnames(c("krs", "cases"))
agesplit <- covid_byage[["Altersgruppe"]] %>%
unique() %>%
lapply(function(g){
subset <- covid_byage[covid_byage[["Altersgruppe"]] == g,] %>%
merge(case_per_krs, by.x = "krs", by.y = "krs")
subset["case_share"] <- subset[["AnzahlFall"]]/subset[["cases"]]
return(subset)
})
temp <- bind_rows(agesplit[[3]][c(1,5)],agesplit[[7]][c(1,5)])
temp <- aggregate(temp[[2]], by = list(temp[[1]]), FUN = sum)
agesplit[[3]]['cases'] <- merge(agesplit[[3]]['krs'], temp, by.x = "krs", by.y = "Group.1", all.x = T)[[2]]
View(covid_byage)
agesplit[[3]][c('krs', 'AnzahlFall')]
agesplit[[7]][c(1,5)]
agesplit[[3]][c(1,5)]
temp <- bind_rows(agesplit[[3]][c(1,5)], agesplit[[7]][c(1,5)])
temp
aggregate(temp[[2]], by = temp[[1]], FUN = sum)
temp <- aggregate(temp[[2]], by = list(temp[[1]]), FUN = sum)
temp
merge(agesplit[[3]]['krs'], temp, by.x = "krs", by.y = "Group.1", all.x = T)
agesplit[[3]]['AnzahlFall'] <- merge(agesplit[[3]]['krs'], temp, by.x = "krs", by.y = "Group.1", all.x = T)[[2]]
agesplit[[3]]['case_share'] <- agesplit[[3]][["AnzahlFall"]]/agesplit[[3]][["cases"]]
ggplot(agesplit[[3]], aes(x=case_share/age_share)) +
geom_histogram(binwidth=0.15, color="black", fill="white") +
geom_vline(aes(xintercept=1), color="red", linetype="dashed", size=1) +
geom_vline(aes(xintercept=mean(case_share/age_share)), color="blue", linetype="dashed", size=1) +
theme(text = element_text(size=15),
axis.text.x = element_text(angle = 0, hjust=0.5),
axis.text.y = element_text(angle = 0, hjust=0.5),
axis.title.x = element_text(color = "grey20", size = 15, vjust = 0.5, face = "plain"),
axis.title.y = element_text(color = "grey20", size = 15, angle = 90, hjust = .5, vjust = 2, face = "plain")) +
ylim(0, 120) +
xlab("Cases relative to Population Share") +
ylab("Frequency")
agesplit[[3]]['age_share'] <- rowSums(agesplit[[3]][,21:23])/agesplit[[3]][,24]
ggplot(agesplit[[3]], aes(x=case_share/age_share)) +
geom_histogram(binwidth=0.15, color="black", fill="white") +
geom_vline(aes(xintercept=1), color="red", linetype="dashed", size=1) +
geom_vline(aes(xintercept=mean(case_share/age_share)), color="blue", linetype="dashed", size=1) +
theme(text = element_text(size=15),
axis.text.x = element_text(angle = 0, hjust=0.5),
axis.text.y = element_text(angle = 0, hjust=0.5),
axis.title.x = element_text(color = "grey20", size = 15, vjust = 0.5, face = "plain"),
axis.title.y = element_text(color = "grey20", size = 15, angle = 90, hjust = .5, vjust = 2, face = "plain")) +
ylim(0, 120) +
xlab("Cases relative to Population Share") +
ylab("Frequency")
setwd("C:/Users/Marius/Desktop/WirVsVirus/coronaDB")
covid_byage <- read.csv(paste0(getwd(), "/data/03_integrated_data/covid_merged_byage.csv"))
covid_bylk <- read.csv(paste0(getwd(), "/data/03_integrated_data/covid_merged_bylk.csv"))
covid_bysex <- read.csv(paste0(getwd(), "/data/03_integrated_data/covid_merged_bysex.csv"))
View(covid_byage)
case_per_krs <- aggregate(covid_byage$AnzahlFall, by = list(covid_byage$krs), FUN = sum) %>%
set_colnames(c("krs", "cases"))
agesplit <- covid_byage[["Altersgruppe"]] %>%
unique() %>%
lapply(function(g){
subset <- covid_byage[covid_byage[["Altersgruppe"]] == g,] %>%
merge(case_per_krs, by.x = "krs", by.y = "krs")
subset["case_share"] <- subset[["AnzahlFall"]]/subset[["cases"]]
return(subset)
})
temp <- bind_rows(agesplit[[3]][c(1,5)], agesplit[[7]][c(1,5)])
temp <- aggregate(temp[[2]], by = list(temp[[1]]), FUN = sum)
agesplit[[3]]['AnzahlFall'] <- merge(agesplit[[3]]['krs'], temp, by.x = "krs", by.y = "Group.1", all.x = T)[[2]]
agesplit[[1]]['age_share'] <- rowSums(agesplit[[1]][,11:15])/agesplit[[1]][,24]
agesplit[[2]]['age_share'] <- rowSums(agesplit[[2]][,16:20])/agesplit[[2]][,24]
agesplit[[3]]['age_share'] <- rowSums(agesplit[[3]][,21:23])/agesplit[[3]][,24]
agesplit[[3]]['case_share'] <- agesplit[[3]][["AnzahlFall"]]/agesplit[[3]][["cases"]]
ggplot(agesplit[[3]], aes(x=case_share/age_share)) +
geom_histogram(binwidth=0.15, color="black", fill="white") +
geom_vline(aes(xintercept=1), color="red", linetype="dashed", size=1) +
geom_vline(aes(xintercept=mean(case_share/age_share)), color="blue", linetype="dashed", size=1) +
theme(text = element_text(size=15),
axis.text.x = element_text(angle = 0, hjust=0.5),
axis.text.y = element_text(angle = 0, hjust=0.5),
axis.title.x = element_text(color = "grey20", size = 15, vjust = 0.5, face = "plain"),
axis.title.y = element_text(color = "grey20", size = 15, angle = 90, hjust = .5, vjust = 2, face = "plain")) +
ylim(0, 120) +
xlab("Cases relative to Population Share") +
ylab("Frequency")
ggplot(agesplit[[3]], aes(x=case_share/age_share)) +
geom_histogram(binwidth=0.15, color="black", fill="white") +
geom_vline(aes(xintercept=1), color="red", linetype="dashed", size=1) +
geom_vline(aes(xintercept=mean(case_share/age_share)), color="blue", linetype="dashed", size=1) +
theme(text = element_text(size=15),
axis.text.x = element_text(angle = 0, hjust=0.5),
axis.text.y = element_text(angle = 0, hjust=0.5),
axis.title.x = element_text(color = "grey20", size = 15, vjust = 0.5, face = "plain"),
axis.title.y = element_text(color = "grey20", size = 15, angle = 90, hjust = .5, vjust = 2, face = "plain")) +
ylim(0, 80) +
xlab("Cases relative to Population Share") +
ylab("Frequency")
ggsave('age_share_60+.pdf')
ggplot(agesplit[[3]], aes(x=case_share/age_share)) +
geom_histogram(binwidth=0.15, color="black", fill="white") +
geom_vline(aes(xintercept=1), color="red", linetype="dashed", size=1) +
geom_vline(aes(xintercept=mean(case_share/age_share)), color="blue", linetype="dashed", size=1) +
theme(text = element_text(size=15),
axis.text.x = element_text(angle = 0, hjust=0.5),
axis.text.y = element_text(angle = 0, hjust=0.5),
axis.title.x = element_text(color = "grey20", size = 15, vjust = 0.5, face = "plain"),
axis.title.y = element_text(color = "grey20", size = 15, angle = 90, hjust = .5, vjust = 2, face = "plain")) +
labs(title = "Age Group 60+") +
ylim(0, 80) +
xlab("Cases relative to Population Share") +
ylab("Frequency")
ggsave('age_share_60+.pdf')
